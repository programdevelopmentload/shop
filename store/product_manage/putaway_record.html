<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>上架记录</title>
    <link rel="stylesheet" type="text/css" href="../css/base.css"/>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap-table.min.css">
    <link rel="stylesheet" type="text/css" href="../css/common.css"/>
    <style>


        dt,dd{
            float: left;
        }
        dt img{
            width: 50px;
            height: 50px;
        }
        dd{
            margin-top: 10px;
            margin-left: 15px;
        }
        .list{
            padding: 10px 0;
            font-size: 18px;

        }
        .allList ol{
            overflow: hidden;
            line-height: 40px;
            background: #f2f2f2;
            border:1px solid #999;
            margin-bottom: 0;
        }
        .allList ul{
            overflow: hidden;
            padding:15px 0;
            border: 1px solid #dedede;
            border-top: none;
            margin-bottom: 0;
        }
        .allList ul .name{
            padding-top: 15px;
        }
        #box .allList  li{
            float: left;
            padding-right: 0;
        }
        .right .col-sm-1{
            width: 10%;

        }
        .right .col-sm-2{
            width: 18%;
        }
        .right .col-sm-0{
            width: 5%;
            float: left;
            padding-left: 10px;

        }
        .allList ul .col-sm-1{
            padding-top: 15px;
        }
        .allList ul .col-sm-0{
            padding-top: 15px;
        }

        .product_type li{
            float: left;
            margin-right: 40px;

        }
        .edit{
            float: right;width: 8%;
            padding-top: 15px;
        }
        .allList .ul1{
            border-top: 1px solid #dedede;
        }
        .form-control{
            display: inline-block;
            width: 200px;
        }
        .btn-primary{
            display: inline-block;
            width: 200px;
        }

    </style>
</head>
<body>
<div class="header clearfix">
    <a href="javascript:;">
        <img src="../image/xbxm.png"/>
    </a>
    <a href="javascript:;">
        <img src="../image/login.png"/>
    </a>
    <ol>
        <li>退出</li>
        <i></i>
        <li>通知</li>
        <i></i>
        <li>admin</li>
    </ol>
</div>
<div id="header" class="header clearfix">
    <ul>
        <li><span >店铺管理</span></li>
        <li><span class="head_active">商品管理</span></li>
        <li><span>仓储管理</span></li>
        <li><span>订单管理</span></li>
    </ul>
</div>
<div id="box">
    <div class="left">
        <ul>
            <li >
                <span>陈列管理</span>
                <ul>
                    <li>新品陈列</li>
                    <li>陈列记录</li>
                </ul>
            </li>
            <li >
                <span>上架管理</span>
                <ul>

                    <li>商品上架</li>
                    <li class="first">上架记录</li>

                </ul>
            </li>
            <li >
                <span>在售管理</span>
                <ul>
                    <li>在售商品</li>
                </ul>
            </li>

        </ul>

    </div>
    <div class="right">
        <p class="router">商品管理》上架管理》上架记录</p>

        <div>
           关键字： <input type="text" class="form-control keyWord">
            商品编号：<input type="text" class="form-control number">
            <input type="button" class="form-control btn-primary find" value="查找">
        </div>
        <p class="list">商品列表</p>
        商品类型：
        <select name="" id="" class="form-control down type">
            <option value=" ">全部</option>
            <option value="0">标品</option>
            <option value="1">非标品</option>
            <option value="2">定制品</option>
        </select>
        <div class="allList">
            <ol class="list_head">
                <!--<li class="col-sm-0">序号</li>-->
                <li class="col-sm-2">商品信息</li>
                <li class="col-sm-1">商品类型</li>

                <li class="col-sm-2">商品编号</li>
                <li class="col-sm-1">销售价格</li>
                <li class="col-sm-1">上架时间</li>
                <li class="col-sm-1">样品量</li>
                <li class="col-sm-1">商品状态</li>

                <li class="">操作</li>

            </ol>
            <!--<p><label><input type="checkbox">全选</label> <span>上架陈列</span>  </p>-->

            <div>
                <!--<ul class="ul1">-->
                    <!--&lt;!&ndash;<li class="col-sm-0"><input type="checkbox">1</li>&ndash;&gt;-->
                    <!--<li class="col-sm-2"><dl>-->
                        <!--<dt><img src="../image/icon.png" alt=""></dt>-->

                        <!--<dd>白色两关</dd></dl></li>-->
                    <!--<li class="col-sm-1 name">标品</li>-->
                    <!--<li class="col-sm-1">2121</li>-->
                    <!--<li class="col-sm-1">2011_11_11</li>-->
                    <!--<li class="col-sm-1">-->
                        <!--1-->
                    <!--</li>-->

                    <!--<li class="col-sm-1">-->
                        <!--1-->
                    <!--</li>-->
                    <!--<li class="col-sm-1">-->
                        <!--1-->
                    <!--</li>-->
                    <!--<li class="edit col-sm-2" ><span>查看</span><span>上架</span></li>-->
                <!--</ul>-->
            </div>

        </div>
        <!--分页-->
        <div class="leftBottom clearfix">
            <div class="page pageBar" id="page">
                <p></p >
                <div class="pageLft clearfix">
                    <a href="#" class="prev"></a>
                    <a href="#" class="active">1</a>
                    <a href="#"></a>
                    <a href="#"></a>
                    <a href="#"></a>
                    <a href="#"></a>
                    <span>...</span>
                    <a href="#" class="next"></a>
                </div>
                <div class="pageRht">共<span id="totalPage"></span>页</div>
            </div>
        </div>

    </div>
</div>
<script src="../js/jquery-1.12.4.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/common.js"></script>
<script src="../js/pagination.js"></script>
<script>

    var type="";
    var number="";
    var keyWord="";

 $(".find").click(function () {
     keyWord=$(".keyword").html();
     number=$(".number").html();

     searchNowPage();
     searchPage(_nowPage);
 })



    $(".type").change(function () {
        type=$(this).val();

        searchNowPage();
        searchPage(_nowPage);
    });
    $(function () {
        searchPage();   //初始化函数
    });
    /**
     * 初始化分页对象
     * @params url 访问后台分页地址
     * @params pageId 页面上id="page"的div
     * @params callBack 自己定义的，拼接table数据的方法，data：callBack的参数：json格式的table数据
     */
    var _nowPage = 1;
    var pagination = new Pagination('http://172.16.40.153:8009/shop/findShelfRecord', "page", function (data) {
        fillTableData(data);
    });
    function searchNowPage() {//首次两参进入
        var a;
        a = pagination.returnParams();
        _nowPage = a.currentPageNo;
    };

    function searchPage(page) {//首次两参进入
        pagination.search(getParams(), page);
    }
    /** 得到搜索条件的json对象 */
    function getParams() {
        var params = {
            'shopId':11010101,
            'pageSize':10,
            'pageNum':_nowPage,
            type:type,
            number:number,
            keyWord:"",

        };
        return params;
    };
    function fillTableData(data) {
        console.log(data)
        // var data=res.data.items;
        var str="";
        for (var i=0;i<data.length;i++){
            str+='<ul class="liCenter"><li class="col-sm-2">' +
                '<span class="s1"><img src="'+data[i].pics[0].pic+'" alt=""></span><span class="s2">'
            str+=data[i].showName;
            str+='</span></li><li class="col-sm-1 name">';
            str+=data[i].goodsService.goodsType+'</li>'
            str+='<li class="col-sm-2">'+data[i].id+'</li>'
            str+='<li class="col-sm-1">￥'+data[i].price+'</li>'
            str+='<li class="col-sm-1">'+data[i].onShelfTime+'</li>'
            str+='<li class="col-sm-1">'+data[i].sampleCount+'</li>'
            switch (data[i].state){
                case 2:
                    str+='<li class="col-sm-1">待上架</li>';
                    break
                case 3:
                    str+='<li class="col-sm-1">已上架</li>';
                    break
                case 4:
                    str+='<li class="col-sm-1">已下架</li>';
                    break
            }
            str+='  <li class="edit" ><span class="look" orderId="'+data[i].id+'">查看</span></li></ul>'
        }
        $(".allList div").html(str);
    }

    //点击查看
    $('.allList div').on('click','.look',function () {

        sessionStorage.setItem('orderId',$(this).attr('orderId'))
        window.location.href='./record_details.html'
    })

</script>
</body>
</html>