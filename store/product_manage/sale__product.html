<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>在售商品</title>
    <link rel="stylesheet" type="text/css" href="../css/base.css"/>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap-table.min.css">
    <link rel="stylesheet" type="text/css" href="../css/common.css"/>
    <style>
        dt,dd{
            float: left;
        }
        dt img{
            width: 50px;
            height: 50px;
        }
        dd{
            margin-top: 10px;
            margin-left: 15px;
        }
        .list{
            padding: 10px 0;
            font-size: 18px;

        }
        .allList ol{
            overflow: hidden;
            line-height: 40px;
            background: #f2f2f2;
            border:1px solid #999;
            margin-bottom: 0;
        }
        .allList ul{
            overflow: hidden;
            padding:15px 0;
            border: 1px solid #dedede;
            border-top: none;
            margin-bottom: 0;
        }
        .allList ul .name{
            padding-top: 15px;
        }
        #box .allList  li{
            float: left;
            padding-right: 0;
        }
        .right .col-sm-1{
            width: 10%;

        }
        .right .col-sm-2{
            width: 18%;
        }
        .right .col-sm-0{
            width: 5%;
            float: left;
            padding-left: 10px;

        }
        .allList ul .col-sm-1{
            padding-top: 15px;
        }
        .allList ul .col-sm-0{
            padding-top: 15px;
        }

        .product_type li{
            float: left;
            margin-right: 40px;

        }
        .edit{
            float: right;width: 8%;
        }
        .allList .ul1{
            border-top: 1px solid #dedede;
        }
        .form-control{
            display: inline-block;
            width: 200px;
        }
        .btn-primary{
            display: inline-block;
            width: 200px;
        }
        .none{
            margin-top: 40px;
            margin-left: 40%;
            display: none;
        }
        .none img{
            width: 50px;
            height: 50px;
            margin-right: 30px;

        }
        .edit span{
            margin-right: 15px   ;
        }
        .col-sm-2 img{
            width: 100%;
            height: 60px;
        }
        .col-sm-2 span{
            width: 65%;
            text-align: left;
        }
        .col-sm-2 .s1{
            width: 30%;
        }
    </style>
</head>
<body>
<div class="header clearfix">
    <a href="javascript:;">
        <img src="../image/xbxm.png"/>
    </a>

    <a href="javascript:;">
        <img src="../image/login.png"/>
    </a>
    <ol>
        <li>退出</li>
        <i></i>
        <li>通知</li>
        <i></i>
        <li>admin</li>
    </ol>
</div>
<div id="header" class="header clearfix">
    <ul>
        <li><span >店铺管理</span></li>
        <li><span class="head_active">商品管理</span></li>
        <li><span>仓储管理</span></li>
        <li><span>订单管理</span></li>
    </ul>
</div>

<div id="box">
    <div class="left">


        <ul>
            <li >
                <span>陈列管理</span>
                <ul>
                    <li>新品陈列</li>
                    <li>陈列记录</li>
                </ul>
            </li>
            <li >
                <span>上架管理</span>
                <ul>

                    <li>商品上架</li>
                    <li>上架记录</li>

                </ul>
            </li>
            <li >
                <span>在售管理</span>
                <ul>

                    <li class="first">在售商品</li>


                </ul>
            </li>

        </ul>

    </div>
    <div class="right">
        <p class="router">商品管理》在售管理》在售商品</p>

        <div>
           关键字： <input type="text" class="form-control keyWord" >
            商品编号：<input type="text" class="form-control number">
            <input type="button" class="form-control btn-primary" value="查找">
        </div>
        <p class="list">上架清单 <span>共 <i>21</i>条</span></p>


        <div class="allList">
            <ol>
                <!--<li class="col-sm-0">序号</li>-->
                <li class="col-sm-2">商品信息</li>
                <li class="col-sm-1">商品类型</li>

                <li class="col-sm-1">商品编号</li>
                <li class="col-sm-1">销售价格</li>
                <li class="col-sm-1">上架时间</li>
                <li class="col-sm-1">样品量</li>
                <li class="col-sm-1">商品状态</li>

                <li class="">操作</li>

            </ol>
            <!--<p><label><input type="checkbox">全选</label> <span>上架陈列</span>  </p>-->
                <div>

                </div>
            <ul class="ul1">
                <!--<li class="col-sm-0"><input type="checkbox">1</li>-->
                <li class="col-sm-2">
                     <span class="s1">
                          <img src="../image/icon.png" alt="">
                    </span>

                    <span class="s2">白色两关242412214121</span>
                </li>
                <li class="col-sm-1 name">标品</li>

                <li class="col-sm-1">2121</li>

                <li class="col-sm-1">2011_11_11</li>
                <li class="col-sm-1">
                    1
                </li>

                <li class="col-sm-1">
                    1
                </li>
                <li class="col-sm-1">
                    1
                </li>
                <li class="edit col-sm-2" ><span>查看</span><span>编辑标题</span><span>打印价签</span></li>

            </ul>
        </div>
        <div class="none">
            <img src="../image/warn.png" alt="">
            <span>您的店铺仍处于锁定状态，无法进行商品交易</span>

        </div>
    </div>
</div>
<!--分页-->
<div class="leftBottom clearfix">
    <div class="page pageBar" id="page">
        <p></p >
        <div class="pageLft clearfix">
            <a href="#" class="prev"></a>
            <a href="#" class="active">1</a>
            <a href="#"></a>
            <a href="#"></a>
            <a href="#"></a>
            <a href="#"></a>
            <span>...</span>
            <a href="#" class="next"></a>
        </div>
        <div class="pageRht">共<span id="totalPage"></span>页</div>
    </div>
</div>
<div class="footer">
    <p> CopyRight ? 2011--2014 WWW.BOOM.COM.CN ALL RIGHT RESERVED</p>
    <p> 西藏新博美商业管理连锁股份有限公司 版权所有 技术支持：明腾-西部商务网</p>
    <p> ICP经营许可证编号：藏ICP备16000239号-1 | 藏公安网备54222102000009号</p>
</div>
<script src="../js/jquery-1.12.4.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/common.js"></script>
<script src="../js/pagination.js"></script>
<script>
    var type="";
    var number="";
    var keyWord="";
    var currentPage=1;
    $(".find").click(function () {
        keyWord=$(".keyword").html();
        number=$(".number").html();
        currentPage=1;
        searchNowPage();
        searchPage(_nowPage);
    })



    $(".type").change(function () {
        type=$(this).val();
        currentPage=1;
        searchNowPage();
        searchPage(_nowPage);
    });
    $(function () {
        searchPage();   //初始化函数
    });
    /**
     * 初始化分页对象
     * @params url 访问后台分页地址
     * @params pageId 页面上id="page"的div
     * @params callBack 自己定义的，拼接table数据的方法，data：callBack的参数：json格式的table数据
     */
    var _nowPage = 1;
    var pagination = new Pagination('http://172.16.40.153:8009/shop/findShelfRecord', "page", function (data) {
        fillTableData(data);
    });
    function searchNowPage() {//首次两参进入
        var a;
        a = pagination.returnParams();
        _nowPage = a.currentPageNo;
    };

    function searchPage(page) {//首次两参进入
        pagination.search(getParams(), page);
    }
    /** 得到搜索条件的json对象 */
    function getParams() {
        var params = {
            'shopId':11010101,
            'pageSize':5,
            'currentPage':currentPage,
            type:type,
            number:number,
            keyWord:"",

        };
        return params;
    };
    function fillTableData(data) {
        console.log(data)
        // var data=res.data.items;
        var str="";
        for (var i=0;i<data.length;i++){
            str+='<ul class="liCenter"><li class="col-sm-2">' +
                '<span class="s1"><img src="'+data[i].pics[0].pic+'" alt=""></span><span class="s2">'
            str+=data[i].showName;
            str+='</span></li><li class="col-sm-1 name">';

            str+=data[i].goodsService.goodsType+'</li>'
            str+='<li class="col-sm-2">'+data[i].id+'</li>'
            str+='<li class="col-sm-1">￥'+data[i].price+'</li>'
            str+='<li class="col-sm-1">'+data[i].onShelfTime+'</li>'
            str+='<li class="col-sm-1">'+data[i].sampleCount+'</li>'
            switch (data[i].state){
                case 2:
                    str+='<li class="col-sm-1">待上架</li>';
                    break
                case 3:
                    str+='<li class="col-sm-1">在售</li>';
                    break
                case 4:
                    str+='<li class="col-sm-1">已下架</li>';
                    break
            }
            str+='  <li class="edit" pro_id="'+data[i].id+'" ><span>查看</span><span>编辑标题</span><span>打印价签</span></li></ul>'
        }
        $(".allList div").html(str);
    }
    rewriteAjax({
        url:"http://172.16.40.153:8009/shop/findShelfRecord",
        data:{   'shopId':11010101,
            'pageSize':5,
            'currentPage':currentPage,
            type:type,
            number:number,
            keyWord:keyWord,
        }
    },function (res) {
        if(res.data==0){
            $(".allList div").hide()
            $(".none").html('<img src="../image/warn.png" alt=""><span>您的店铺仍处于锁定状态，无法进行商品交易</span>').css("display","block");
        }else if(res.data==null){
            $(".allList div").hide()
            $(".none").html('<img src="../image/warn.png" alt=""><span>本店暂无在售商品</span>').css("display","block");

        }
    })
</script>
</body>
</html>